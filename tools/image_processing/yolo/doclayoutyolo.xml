<tool id="doclayout_yolo" name="DocLayout-YOLO: Enhancing Document Layout Analysis" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>through Diverse Synthetic Data and Global-to-Local Adaptive Perception</description>
    <macros>
        <token name="@TOOL_VERSION@">0.0.4</token>
        <token name="@VERSION_SUFFIX@">0</token>
        <token name="@PROFILE@">23.2</token>
    </macros>
    <creator>
        <organization name="European Galaxy Team" url="https://galaxyproject.org/eu/"/>
        <person givenName="Anup" familyName="Kumar" email="kumara@informatik.uni-freiburg.de"/>
    </creator>
    <requirements>
        <!--<container type="docker">quay.io/galaxy/doclayout-yolo:@VERSION@</container>-->
        <container type="docker">doclayout:latest</container>
    </requirements>
    <command detect_errors="aggressive"><![CDATA[
    python '$__tool_directory__/main.py'
            --yolo_model '$input_yolo_model'
            --input_image '$input_image'
            --input_confidence '$input_confidence'
            --output_image '$output_image'
]]>
    </command>
    <inputs>
	    <param name="input_yolo_model" type="data" format="zip" label="Yolo model" help="Please upload a Yolo model."/>
        <param name="input_image" type="data" format="tiff,png,jpg" label="Input image" help="Please provide an input image for the analysis."/>
        <param name="input_confidence" type="float" label="Confidence" value="0.5" min="0.0" max="1.0" help="Set confidence threshold between 0.0 and 1.0 drawing bounding boxes"/>
    </inputs>
    <outputs>
        <data format="png" name="output_image" label="Segmented image"></data>
    </outputs>
    <tests>
    </tests>
    <help>
        <![CDATA[
**What it does**


The tool makes prediction of either responder (1) or non-responder (0) to an immunotherapy for multiple different cancer types. The features used to train a Random Forest (RF16) model include 16 genomic, molecular, demographic, and clinical. More details in associated publication: "Improved prediction of immune checkpoint blockade efficacy across multiple cancer types" (https://pubmed.ncbi.nlm.nih.gov/34725502/). The model is available via a Docker container. 

**Description**

This is a Random Forest algorithm-based machine learning model called RF16, which incorporates a total of 16 genomic, molecular, demographic, and clinical features to predict the immunotherapy response for a patient. The model assigns a value of 0 for NonResponder and 1 for Responder. Please be aware that the column names in the GitHub code and the downloaded dataset from the publication may vary. Users are advised to make minor adjustments to either the code or the dataset to ensure compatibility. The curated version of the model has modified the column names in the training code to align with the dataset. The features used are: "Cancer_Type2", "Albumin", "HED", "TMB", "FCNA", "BMI", "NLR", "Platelets", "HGB", "Stage (1:IV; 0:I-III)", "Age", "Drug (1:Combo; 0:PD1/PDL1orCTLA4)", "Chemo_before_IO (1:Yes; 0:No)","HLA_LOH", "MSI (1:Unstable; 0:Stable_Indeterminate)", "Sex (1:Male; 0:Female)"

**Input file**

Provide a tabular file (as tabular or csv or xlsx) containing all the features as mentioned above.

**Output file**

Returns predicted data as a tabular file - the predictions are concatenated as a last column of the test data.

        ]]>
    </help>
    <citations>
        <citation type="bibtex">
            @ARTICLE{BIOMD0000001066,
                Author = {Chowell D and et al.},
                title = {{Chowell2022 - Random Forest model to predict efficacy of immune checkpoint blockade across multiple cancer patient cohorts}},
                url = {https://www.ebi.ac.uk/biomodels/BIOMD0000001066}
            }
        </citation>
    </citations>
</tool>
